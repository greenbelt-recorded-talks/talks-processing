{% extends 'base.html' %}

{% block content %}

<h1 class="uk-heading-line uk-text-center"><span>Rota</span></h1>


<p>This page provides a way to create a new rota, a tabular view of the rota by venue, and a timeline view of the rota (scroll down!)</p>

<div class="uk-card uk-card-body uk-card-default">

<h1>Create New Rota</h1>

<p>Create a new rota, using the talks and recorders files already provided. This will always create the same rota for the same inputs. Small changes to the input files (e.g. adding a talk) can result in large changes to the rota. If there are any last-minute changes - particularly once rotas have been issued to recorders - these should be addressed manually. 

There is no way to update the online rota with manual changes, apart from by directly editing the database. If you need to do this, speak to Rob. 
</p>

<form method=post>
	<button>Create New Rota</button>
</form>

</div>

<h1>Rota by venue</h1>
<table class="pure-table pure-table-bordered">
	<tr>
	<th> Venue </th>
{% for talk_time in times %}

	<th>{{ talk_time }}</th>

{% endfor %}
	</tr>

{% for talk_venue in venues %}

	<tr>
		<td> {{ talk_venue }} </td>
{% for talk_time in times %}

<td>
		{% for talk in talks %}
		{% if talk["start_time"] == talk_time and talk["venue"] == talk_venue %}
		<div class ="{% if talk["is_priority"] %} priority_talk {% endif %} {% if talk["recorded_by"] is not none %} is_recorded {% endif %} ">
			<p>{{ talk["title"] }}</p>
			<p>{{ talk["speaker"] }}</p>
			<p>{{ talk["recorder_name"] }}</p>
		</div>
		{% endif %}
		{% endfor %}
		
</td>
{% endfor %}
	</tr>

{% endfor %}

</table>


<h1> Rota by Time </h1>

<table class="pure-table pure-table-bordered">
<tr>
	<th>Talk ID</th>
	<th>Venue</th>
	<th>Title</th>
	<th>Speaker(s)</th>
        <th>Recorded By</th>
        <th>Day</th>
	<th>Start Time</th>
        <th>End Time</th>
</tr>
{% for talk in talks %}
<tr class="{% if talk["is_priority"] %} priority_talk {% endif %} {% if talk["recorded_by"] is not none %} is_recorded {% endif %}">
	<td>{{ talk.id }}</td>
	<td>{{ talk.venue }}</td>
	<td>{{ talk.title }}</td>
        <td>{{ talk.speaker }}</td>
	<td>{{ talk.recorder_name }}</td>
        <td>{{ talk.day }}</td>
        <td>{{ talk.start_time }}</td>
        <td>{{ talk.end_time }}</td>
</tr>


{% endfor %}
</table>

{% endblock %}


